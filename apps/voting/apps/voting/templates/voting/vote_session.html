{# templates/voting/vote_session.html #}
{% extends "base.html" %}
{% load static %}
{% block title %}Health Check - Session {{ session_id }}{% endblock %}

{% block content %}
<div class="max-w-3xl mx-auto py-8 space-y-12">

  {% for card in cards %}
  <form method="post" class="space-y-8">
    {% csrf_token %}

    <!-- QUESTION 1 -->
    <div class="space-y-4">
      <div class="bg-pink-100 rounded-full py-3 px-6">
        <p class="text-center text-lg text-pink-600 font-medium">
          {{ card.eval_prompt }}
        </p>
      </div>

      <div class="flex justify-around items-center">
        <!-- Excellent -->
        <label class="cursor-pointer">
          <input
            type="radio"
            name="vote_{{ card.id }}"
            value="Green"
            class="hidden peer"
          />
          <span
            class="inline-block w-24 h-14 bg-green-400 rounded-full
                   peer-checked:ring-4 peer-checked:ring-offset-2
                   peer-checked:ring-green-300 flex items-center
                   justify-center text-white font-semibold"
          >
            Excellent
          </span>
        </label>

        <!-- Average -->
        <label class="cursor-pointer">
          <input
            type="radio"
            name="vote_{{ card.id }}"
            value="Amber"
            class="hidden peer"
          />
          <span
            class="inline-block w-24 h-14 bg-yellow-400 rounded-full
                   peer-checked:ring-4 peer-checked:ring-offset-2
                   peer-checked:ring-yellow-200 flex items-center
                   justify-center text-white font-semibold"
          >
            Average
          </span>
        </label>

        <!-- Bad -->
        <label class="cursor-pointer">
          <input
            type="radio"
            name="vote_{{ card.id }}"
            value="Red"
            class="hidden peer"
          />
          <span
            class="inline-block w-24 h-14 bg-red-600 rounded-full
                   peer-checked:ring-4 peer-checked:ring-offset-2
                   peer-checked:ring-red-300 flex items-center
                   justify-center text-white font-semibold"
          >
            Bad
          </span>
        </label>
      </div>

      <textarea
        name="feedback_eval_{{ card.id }}"
        rows="3"
        placeholder="We would appreciate any additional feedback…"
        class="w-full border border-purple-300 rounded-lg p-3 italic
               text-purple-500"
      ></textarea>
    </div>

    <!-- QUESTION 2 -->
    <div class="space-y-4">
      <div class="bg-red-200 rounded-full py-3 px-6">
        <p class="text-center text-lg text-red-600 font-medium">
          {{ card.traj_prompt }}
        </p>
      </div>

      <div class="flex justify-around items-center">
        <!-- Improving -->
        <label class="cursor-pointer flex flex-col items-center">
          <input
            type="radio"
            name="progress_{{ card.id }}"
            value="Improving"
            class="hidden peer"
          />
          <span
            class="text-4xl text-green-400 peer-checked:text-green-600"
          >
            ↑
          </span>
          <span class="mt-1">Improving</span>
        </label>

        <!-- Stable -->
        <label class="cursor-pointer flex flex-col items-center">
          <input
            type="radio"
            name="progress_{{ card.id }}"
            value="Stable"
            class="hidden peer"
          />
          <span
            class="text-4xl text-yellow-400 peer-checked:text-yellow-600"
          >
            →
          </span>
          <span class="mt-1">Stable</span>
        </label>

        <!-- Deteriorating -->
        <label class="cursor-pointer flex flex-col items-center">
          <input
            type="radio"
            name="progress_{{ card.id }}"
            value="Deteriorating"
            class="hidden peer"
          />
          <span
            class="text-4xl text-red-600 peer-checked:text-red-800"
          >
            ↓
          </span>
          <span class="mt-1">Deteriorating</span>
        </label>
      </div>

      <textarea
        name="feedback_traj_{{ card.id }}"
        rows="3"
        placeholder="We would appreciate any additional feedback…"
        class="w-full border border-purple-300 rounded-lg p-3 italic
               text-purple-500"
      ></textarea>
    </div>

    <div class="text-right">
      <button
        type="submit"
        class="px-6 py-2 bg-blue-600 text-white rounded
               hover:bg-blue-700"
      >
        Submit Votes
      </button>
    </div>
  </form>
  {% endfor %}

</div>
{% endblock %}
